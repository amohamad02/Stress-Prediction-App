<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>HMC Dashboard</title>
  <link rel="stylesheet" href="/static/styles.css">

  <!-- Quick Start: CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

  <!-- Nav Bar -->
  <nav>
    <a href="/home"><img src="/static/hmc_logo.png" width="400"  height="100" alt="Website Logo"></a>
    <a href="/home">Home</a>
    <a href="/robots">Robots</a>
    <a href="/">Logout</a>

    <div class="profile-icon">
      <img src="/static/profile.png" alt="Profile Icon">
    </div>
  </nav>

  <style>
    /* Add some basic styles for the table and search bar */
    table {
      border-collapse: collapse;
      width: 100%;
      text-align: center;
    }

    th, td {
      padding: 10px;
      border: 1px solid black;
    }

    input[type=text] {
      width: 100%;
      padding: 12px 20px;
      margin: 8px 0;
      box-sizing: border-box;
      border: 2px solid #ccc;
      border-radius: 4px;
    }

    input[type=submit] {
      background-color: #4CAF50;
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    input[type=submit]:hover {
      background-color: #45a049;
    }

    body {
      margin: 30px;
    }
  </style>
</head>
<body>
  <br><br><br>
  <br>

  <!-- Add the search bar at the top of the page -->
  <form>
    <input type="text" id="searchInput" onkeyup="searchTable()" placeholder="Search for user...">
  </form>

  <table id="myTable">
    <thead>
      <tr>
        <th>User ID</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Stress Status</th>
      </tr>
    </thead>
    	{% for user, is_stressed in users %}
			<tr>
				<td><a href="/user/{{user.id}}">{{user.id}}</a></td>
				<td>{{ user.first_name }}</td>
				<td>{{ user.last_name }}</td>
				{% if is_stressed %}
				    <td <span style="color:red">Stressed</span></td>
				{% else %}
                    {% if is_stressed == False %}
                        <td>Not Stressed</td>
                    {% else %}
					    <td>No HRV Records</td>
                    {% endif %}
				{% endif %}	
        </tr>
      </tbody>
    {% endfor %}
  </table>
  <a href="/add_user" class="add-user-button">Add User</a>

  <style>
    .add-user-button {
      display: block;
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 10px;
      background-color: #3477BA;
      color: #fff;
      text-align: center;
      text-decoration: none;
      border-radius: 50%;
      box-shadow: 0 2px 4px rgba(0,0,0,0.3);
      transition: transform 0.2s ease-in-out;
    }

    .add-user-button:hover {
      transform: scale(1.1);
    }
  </style>

  <script>
    function searchTable() {
      var input, filter, table, tr, td1, td2, i, txtValue1, txtValue2;
      input = document.getElementById("searchInput");
      filter = input.value.toUpperCase();
      table = document.getElementById("myTable");
      tr = table.getElementsByTagName("tr");
      for (i = 0; i < tr.length; i++) {
        td1 = tr[i].getElementsByTagName("td")[1];
        td2 = tr[i].getElementsByTagName("td")[2];
        if (td1 || td2) {
          txtValue1 = td1.textContent || td1.innerText;
          txtValue2 = td2.textContent || td2.innerText;
          if (txtValue1.toUpperCase().indexOf(filter) > -1 || txtValue2.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
        }
      }
    }
  </script>
</body>
</html>



